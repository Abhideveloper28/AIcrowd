<% if participant.present? %>
  <% if !defined?(joined_avatar) || !joined_avatar %>
    <a href="<%= participant_link(participant) %>" target="_blank">
      <span class="text-link mr-1">
        <%= participant_avatar(participant, 'avatar mr-1 img-sm') %>
          <small><%= username %></small>
      </span>
    </a>
  <% else %>
    <%
      avatar           = avatar.present? ? avatar : true
      span_location_id = location_id(participant)
      base_class       = base_class.present? ? base_class : "avatar"
    %>

    <span id="<%= span_location_id %>">
      <span data-controller="participants"
            data-participants-participant="<%= participant&.id %>"
            data-participants-username="<%= false %>"
            data-participants-avatar="<%= avatar %>"
            data-participants-location="<%= span_location_id %>"
            data-action="mouseenter->participants#getUserProfile">
            <%= render partial: 'participants/research_name_avatar', locals: { participant: participant, base_class: base_class } %>
      </span>
    </span>
  <% end %>
<% end %>
